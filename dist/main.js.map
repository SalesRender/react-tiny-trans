{"version":3,"file":"main.js","mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,yFAAyF,2HAA2H;AAC7Q,CAAC;AACD,O;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACV+B;AACwF;AAGvH,IAAM,YAAY,GAAG,oDAAa,CAAc,IAAI,CAAC,CAAC;AAE/C,IAAM,eAAe,GAAG;IAC7B,wDAAU,CAAC,YAAY,CAAwB;AAA/C,CAA+C,CAAC;AAE3C,IAAM,aAAa,GAAG,UAAiC,EAKjC;QAJ3B,QAAQ,gBACR,KAAK,aACL,YAAY,oBACZ,UAAU;IAEJ,gBAAwB,+CAAQ,CAAC,KAAK,CAAC,MAAtC,OAAO,UAAE,UAAU,QAAmB,CAAC;IACxC,gBAAyC,iDAAU,CAAC,UAAC,CAAC,IAAK,QAAC,CAAC,EAAF,CAAE,EAAE,KAAK,CAAC,MAApE,cAAc,UAAE,oBAAoB,QAAgC,CAAC;IAE5E,IAAM,SAAS,GAAG,kDAAW,CAAC;QAC5B,qBAAqB,CAAC,cAAM,iBAAU,CAAC,IAAI,CAAC,EAAhB,CAAgB,CAAC,CAAC;IAChD,CAAC,EAAE,EAAE,CAAC,CAAC;IAEP,IAAM,OAAO,GAAG,kDAAW,CAAC;QAC1B,qBAAqB,CAAC;YACpB,UAAU,CAAC,KAAK,CAAC,CAAC;YAClB,oBAAoB,EAAE,CAAC;QACzB,CAAC,CAAC,CAAC;IACL,CAAC,EAAE,EAAE,CAAC,CAAC;IAEP,gDAAS,CAAC;QACR,KAAK,CAAC,gBAAgB,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;QAC/C,KAAK,CAAC,gBAAgB,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;QAC3C,OAAO;YACL,KAAK,CAAC,mBAAmB,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;YAClD,KAAK,CAAC,mBAAmB,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;QAChD,CAAC,CAAC;IACJ,CAAC,EAAE,CAAC,OAAO,EAAE,SAAS,EAAE,KAAK,CAAC,CAAC,CAAC;IAEhC,gDAAS,CAAC;QACR,KAAK,CAAC,IAAI,CAAC,EAAE,YAAY,gBAAE,MAAM,EAAE,UAAU,EAAE,CAAC,CAAC;IACnD,CAAC,EAAE,CAAC,UAAU,EAAE,KAAK,EAAE,YAAY,CAAC,CAAC,CAAC;IAEtC,IAAM,KAAK,GAAG,8CAAO,CACnB,cAAM,QAAC,EAAE,OAAO,WAAE,KAAK,SAAE,cAAc,kBAAE,CAAC,EAApC,CAAoC,EAC1C,CAAC,cAAc,EAAE,KAAK,EAAE,OAAO,CAAC,CACjC,CAAC;IAEF,OAAO,iDAAC,YAAY,CAAC,QAAQ,IAAC,KAAK,EAAE,KAAK,IAAG,QAAQ,CAAyB,CAAC;AACjF,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChDqC;AACW;AAGlD,IAAM,mBAAmB,GAAG,UAAC,SAAoB;IAC/C,IAAM,GAAG,GAA2B,EAAE,CAAC;IACvC,OAAO,UAAC,IAAI,EAAE,OAAO;QACnB,IAAM,GAAG,GAAG,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,QAAQ,EAAE,CAAC;QAC7B,IAAI,GAAG,IAAI,GAAG;YAAE,OAAO,GAAG,CAAC,GAAG,CAAC,CAAC;QAChC,IAAM,MAAM,GAAG,SAAS,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;QACxC,GAAG,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC;QAClB,OAAO,MAAM,CAAC;IAChB,CAAC,CAAC;AACJ,CAAC,CAAC;AAEK,IAAM,YAAY,GAAG,UAC1B,MAAqC;IAE/B,SAA4B,+DAAe,EAAE,EAA3C,KAAK,aAAE,cAAc,oBAAsB,CAAC;IACpD,IAAM,SAAS,GAAG,8CAAO,CAAC,cAAM,0BAAmB,CAAC,KAAK,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC,EAAlD,CAAkD,EAAE,CAAC,MAAM,EAAE,KAAK,EAAE,cAAc,CAAC,CAAC,CAAC,CAAC,kDAAkD;IACxK,OAAO,8CAAO,CACZ,cAAM,QAAC;QACL,MAAM,EAAE,KAAK,CAAC,MAAM;QACpB,YAAY,EAAE,KAAK,CAAC,YAAY;QAChC,SAAS;KACV,CAAC,EAJI,CAIJ,EACF,CAAC,SAAS,EAAE,KAAK,CAAC,CACnB,CAAC;AACJ,CAAC,CAAC;AAEK,IAAM,aAAa,GACxB,UACE,SAAqD,EACrD,MAAqC;IAEvC,iBAAC,KAAQ;QACP,IAAM,KAAK,GAAG,YAAY,CAAC,MAAM,CAAC,CAAC;QACnC,OAAO,2DAAC,SAAS,eAAK,KAAK,EAAM,KAAK,EAAI,CAAC;IAC7C,CAAC;AAHD,CAGC,CAAC;;;;;;;;;;;ACtCJ;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;;;;;;;ACNsD;AACW","sources":["webpack://useTransContext.useTranslate.withTranslate.TransProvider/webpack/universalModuleDefinition","webpack://useTransContext.useTranslate.withTranslate.TransProvider/./TransProvider.tsx","webpack://useTransContext.useTranslate.withTranslate.TransProvider/./hooks.tsx","webpack://useTransContext.useTranslate.withTranslate.TransProvider/external {\"commonjs\":\"react\",\"commonjs2\":\"react\",\"amd\":\"react\",\"root\":\"React\"}","webpack://useTransContext.useTranslate.withTranslate.TransProvider/webpack/bootstrap","webpack://useTransContext.useTranslate.withTranslate.TransProvider/webpack/runtime/compat get default export","webpack://useTransContext.useTranslate.withTranslate.TransProvider/webpack/runtime/define property getters","webpack://useTransContext.useTranslate.withTranslate.TransProvider/webpack/runtime/hasOwnProperty shorthand","webpack://useTransContext.useTranslate.withTranslate.TransProvider/webpack/runtime/make namespace object","webpack://useTransContext.useTranslate.withTranslate.TransProvider/./index.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"useTransContext\"] = factory(require(\"react\"));\n\telse\n\t\troot[\"useTransContext\"] = root[\"useTransContext\"] || {}, root[\"useTransContext\"][\"useTranslate\"] = root[\"useTransContext\"][\"useTranslate\"] || {}, root[\"useTransContext\"][\"useTranslate\"][\"withTranslate\"] = root[\"useTransContext\"][\"useTranslate\"][\"withTranslate\"] || {}, root[\"useTransContext\"][\"useTranslate\"][\"withTranslate\"][\"TransProvider\"] = factory(root[\"React\"]);\n})(self, function(__WEBPACK_EXTERNAL_MODULE_react__) {\nreturn ","import * as React from 'react';\nimport { ReactElement, createContext, useCallback, useContext, useEffect, useMemo, useReducer, useState } from 'react';\nimport { ContextType, TransProviderProps } from './types';\n\nconst TransContext = createContext<ContextType>(null);\n\nexport const useTransContext = <Locale extends string = string>(): ContextType<Locale> =>\n  useContext(TransContext) as ContextType<Locale>;\n\nexport const TransProvider = <Locale extends string = string>({\n  children,\n  trans,\n  translations,\n  initLocale,\n}: TransProviderProps<Locale>): ReactElement => {\n  const [loading, setLoading] = useState(false);\n  const [updatedTrigger, toggleUpdatedTrigger] = useReducer((v) => !v, false);\n\n  const loadstart = useCallback(() => {\n    requestAnimationFrame(() => setLoading(true));\n  }, []);\n\n  const loadend = useCallback(() => {\n    requestAnimationFrame(() => {\n      setLoading(false);\n      toggleUpdatedTrigger();\n    });\n  }, []);\n\n  useEffect(() => {\n    trans.addEventListener('loadstart', loadstart);\n    trans.addEventListener('loadend', loadend);\n    return (): void => {\n      trans.removeEventListener('loadstart', loadstart);\n      trans.removeEventListener('loadend', loadend);\n    };\n  }, [loadend, loadstart, trans]);\n\n  useEffect(() => {\n    trans.init({ translations, locale: initLocale });\n  }, [initLocale, trans, translations]);\n\n  const value = useMemo<ContextType<Locale>>(\n    () => ({ loading, trans, updatedTrigger }),\n    [updatedTrigger, trans, loading]\n  );\n\n  return <TransContext.Provider value={value}>{children}</TransContext.Provider>;\n};\n","import React, { useMemo } from 'react';\nimport { useTransContext } from './TransProvider';\nimport { Translate, TranslateProps, Variables } from './types';\n\nconst createMemoTranslate = (translate: Translate): Translate => {\n  const map: Record<string, string> = {};\n  return (path, options): string => {\n    const key = path?.toString();\n    if (key in map) return map[key];\n    const result = translate(path, options);\n    map[key] = result;\n    return result;\n  };\n};\n\nexport const useTranslate = <T extends Variables = Variables>(\n  module: string | TemplateStringsArray\n): TranslateProps<T> => {\n  const { trans, updatedTrigger } = useTransContext();\n  const translate = useMemo(() => createMemoTranslate(trans.createTranslate(module)), [module, trans, updatedTrigger]); // eslint-disable-line react-hooks/exhaustive-deps\n  return useMemo(\n    () => ({\n      locale: trans.locale,\n      changeLocale: trans.changeLocale,\n      translate,\n    }),\n    [translate, trans]\n  );\n};\n\nexport const withTranslate =\n  <P, T extends Variables = Variables>(\n    Component: React.ComponentType<P & TranslateProps<T>>,\n    module: string | TemplateStringsArray\n  ) =>\n  (props: P): React.ReactElement => {\n    const trans = useTranslate(module);\n    return <Component {...props} {...trans} />;\n  };\n","module.exports = __WEBPACK_EXTERNAL_MODULE_react__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export { useTranslate, withTranslate } from './hooks';\nexport { TransProvider, useTransContext } from './TransProvider';\n"],"names":[],"sourceRoot":""}