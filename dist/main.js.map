{"version":3,"file":"main.js","mappings":"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","sources":["webpack://useTransContext.useTranslate.withTranslate.TransProvider/webpack/universalModuleDefinition","webpack://useTransContext.useTranslate.withTranslate.TransProvider/external {\"commonjs\":\"react\",\"commonjs2\":\"react\",\"amd\":\"react\",\"root\":\"React\"}","webpack://useTransContext.useTranslate.withTranslate.TransProvider/webpack/bootstrap","webpack://useTransContext.useTranslate.withTranslate.TransProvider/webpack/runtime/compat get default export","webpack://useTransContext.useTranslate.withTranslate.TransProvider/webpack/runtime/define property getters","webpack://useTransContext.useTranslate.withTranslate.TransProvider/webpack/runtime/hasOwnProperty shorthand","webpack://useTransContext.useTranslate.withTranslate.TransProvider/webpack/runtime/make namespace object","webpack://useTransContext.useTranslate.withTranslate.TransProvider/./TransProvider.tsx","webpack://useTransContext.useTranslate.withTranslate.TransProvider/./hooks.tsx"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"useTransContext\"] = factory(require(\"react\"));\n\telse\n\t\troot[\"useTransContext\"] = root[\"useTransContext\"] || {}, root[\"useTransContext\"][\"useTranslate\"] = root[\"useTransContext\"][\"useTranslate\"] || {}, root[\"useTransContext\"][\"useTranslate\"][\"withTranslate\"] = root[\"useTransContext\"][\"useTranslate\"][\"withTranslate\"] || {}, root[\"useTransContext\"][\"useTranslate\"][\"withTranslate\"][\"TransProvider\"] = factory(root[\"React\"]);\n})(self, function(__WEBPACK_EXTERNAL_MODULE__888__) {\nreturn ","module.exports = __WEBPACK_EXTERNAL_MODULE__888__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import React, { createContext, useCallback, useContext, useEffect, useMemo, useReducer, useState } from 'react';\nimport { ContextType, TransProviderProps } from './types';\n\nconst TransContext = createContext<ContextType>(null);\n\nexport const useTransContext = <Locale extends string = string>(): ContextType<Locale> =>\n  useContext(TransContext) as ContextType<Locale>;\n\nexport const TransProvider = <Locale extends string = string>({\n  children,\n  trans,\n  translations,\n  initLocale,\n}: TransProviderProps<Locale>): React.ReactElement => {\n  const [loading, setLoading] = useState(false);\n  const [updatedTrigger, toggleUpdatedTrigger] = useReducer((v) => !v, false);\n\n  const loadstart = useCallback(() => {\n    requestAnimationFrame(() => setLoading(true));\n  }, []);\n\n  const loadend = useCallback(() => {\n    requestAnimationFrame(() => {\n      setLoading(false);\n      toggleUpdatedTrigger();\n    });\n  }, []);\n\n  useEffect(() => {\n    trans.addEventListener('loadstart', loadstart);\n    trans.addEventListener('loadend', loadend);\n    return (): void => {\n      trans.removeEventListener('loadstart', loadstart);\n      trans.removeEventListener('loadend', loadend);\n    };\n  }, [loadend, loadstart, trans]);\n\n  useEffect(() => {\n    trans.init({ translations, locale: initLocale });\n  }, [initLocale, trans, translations]);\n\n  const value = useMemo<ContextType<Locale>>(\n    () => ({ loading, trans, updatedTrigger }),\n    [updatedTrigger, trans, loading]\n  );\n\n  return <TransContext.Provider value={value}>{children}</TransContext.Provider>;\n};\n","import React, { useMemo } from 'react';\nimport { useTransContext } from './TransProvider';\nimport { Translate, TranslateProps, Variables } from './types';\n\nconst createMemoTranslate = (translate: Translate): Translate => {\n  const map: Record<string, string> = {};\n  return (path, options): string => {\n    const key = path?.toString();\n    if (key in map) return map[key];\n    const result = translate(path, options);\n    map[key] = result;\n    return result;\n  };\n};\n\nexport const useTranslate = <T extends Variables = Variables>(\n  module: string | TemplateStringsArray\n): TranslateProps<T> => {\n  const { trans, updatedTrigger } = useTransContext();\n  const translate = useMemo(() => createMemoTranslate(trans.createTranslate(module)), [module, trans, updatedTrigger]); // eslint-disable-line react-hooks/exhaustive-deps\n  return useMemo(\n    () => ({\n      locale: trans.locale,\n      changeLocale: trans.changeLocale,\n      translate,\n    }),\n    [translate, trans]\n  );\n};\n\nexport const withTranslate =\n  <P, T extends Variables = Variables>(\n    Component: React.ComponentType<P & TranslateProps<T>>,\n    module: string | TemplateStringsArray\n  ) =>\n  (props: P): React.ReactElement => {\n    const trans = useTranslate(module);\n    return <Component {...props} {...trans} />;\n  };\n"],"names":["root","factory","exports","module","require","define","amd","self","__WEBPACK_EXTERNAL_MODULE__888__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","TransContext","createContext","useTransContext","useContext","TransProvider","children","trans","translations","initLocale","useState","loading","setLoading","useReducer","v","updatedTrigger","toggleUpdatedTrigger","loadstart","useCallback","requestAnimationFrame","loadend","useEffect","addEventListener","removeEventListener","init","locale","useMemo","Provider","useTranslate","translate","map","path","options","toString","result","createMemoTranslate","createTranslate","changeLocale","withTranslate","Component","props"],"sourceRoot":""}